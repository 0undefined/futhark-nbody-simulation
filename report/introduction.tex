As we further explore the vast universe and discover remote systems, our need to
simulate interactions between an ever increasing number of celestial bodies
(such as planets, stars, solarsystems and whole galaxies) continuous to increase.
To do this we need high performance since the interactions can be complex, and
the number of bodies great. Therefore we need fast software, on fast hardware.

In terms of hardware we use GPU's, since the theoretical perfromance maximum
is vastly superior to CPU's, the task has to be suited for GPU's, which
\textit{n}-body simulations are. To obtain fast software we need clever algorithms,
and calculating these interactions can be done fairly easily, but a naive
implementation has an asymptotic runtime of $O(n^2)$, which is not ideal when we
want to simulate for a great deal of bodies.

In this report we will describe and implement the Barnes-Hut algorithm for
\textit{n}-body simulations. The Barnes-Hut algorithm uses clustering to obtain
an approximated result, but with a runtime of $O(n \cdot \log{n})$.
%\red{INSERT BRIEF EXPLANATION OF BARNES HUT ALGORITHM}

\subsection{Compiling and running}
To compile and run a benchmark one needs the following programs
installed on a system:

\begin{itemize}
  \item Futhark
  \item OpenCL headers and library
  \item Your terminal emulator of choice
\end{itemize}

The procedure is as follows, in a terminal emulator: \\
\begin{lstlisting}[language=bash]
  # Generates the datasets we are going to benchmark on
  # This step might take a while
$ ./runtest -g
  # Download the remote packages required by the project
$ futhark pkg sync
  # run the benchmarks
$ futhark bench --backend=opencl nbodysim.fut
\end{lstlisting}

If generating the large datasets takes too long, you should remove them from the
\texttt{runtest} (shell) script and remember to remove them from the tests in
\texttt{nbodysim.fut}.

If one wants to see a visualization of a simulation, one needs to have Make
installed and run \texttt{\$ make \&\& ./nbodysim-gui}. This simulation
represents a small galaxy with orbiting planets.

\noindent
\textbf{Controls}:
\begin{itemize}
  \item \texttt{Space}: pause/unpause the simulation
  \item \texttt{n}: Take a single step
  \item \texttt{j/k}: alter simulation speed modifier, the lower the slower
  \item \texttt{F1}: Hide text
  \item \texttt{ESC}: Exit
\end{itemize}
